(window.webpackJsonp=window.webpackJsonp||[]).push([[91,38],{1094:function(e,t,r){"use strict";r.r(t);r(26),r(25),r(24),r(17),r(32),r(21),r(33);var o=r(6),n=r(5),l=(r(46),r(52),r(197),r(42)),c=r(821);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={props:{selected:{type:String,default:function(){return"quizizz-library"}},isSearchBarDisabled:{type:Boolean,default:!1},customPlaceholder:{type:String,default:function(){return""}},active:{type:Boolean,default:function(){return!0}},variant:{type:String,default:function(){return"header"}}},data:function(){return{value:"",query:"",autoCompleteStyle:{width:0,top:0},doAutoSearch:!0,selectedAutoCompleteIndex:null,autoCompleteResults:[],inputRef:{}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({placeholder:function(){return this.customPlaceholder?this.customPlaceholder:this.isDesktop?this.$i18n("Search"):this.$i18n("Search Quizizz library")}},Object(l.c)(["isDesktop"])),watch:{$route:function(){this.updateInputValueToRouteParams()},value:function(e){this.doAutoSearch&&(this.query=e)}},created:function(){this.getDebouncedResults=this.$_.debounce(this.getAutoCompleteResults,500)},mounted:function(){var e,t;window.addEventListener("resize",this.changeAutocompleteWidthOnResize);var r=null===(e=this.$refs)||void 0===e||null===(t=e.autoCompleteRef)||void 0===t?void 0:t.$refs.input;r&&(this.assignAutoCompleteWidthAndPosition(r),"hero"===this.variant&&this.active&&!this.isDesktop&&r.focus()),this.updateInputValueToRouteParams()},beforeDestroy:function(){window.removeEventListener("resize",this.changeAutocompleteWidthOnResize)},methods:{updateInputValueToRouteParams:function(){var e=this.$route.params.term;e&&"admin-search-term"===this.$route.name?(this.value=e,this.query=e):(this.value="",this.query="")},assignAutoCompleteWidthAndPosition:function(e){this.autoCompleteStyle.width=e.clientWidth+"px","hero"!==this.variant?this.autoCompleteStyle.top=e.getBoundingClientRect().bottom+5+"px":this.isDesktop?this.autoCompleteStyle.top="70px":this.autoCompleteStyle.top="44px"},onFocus:function(){var e,t=this;this.$emit("focus"),"my-library"!==this.selected&&"reports"!==this.selected||(this.autoCompleteResults=[]),(null===(e=this.value)||void 0===e?void 0:e.length)>2&&"quizizz-library"===this.selected&&this.getDebouncedResults(),this.$nextTick((function(){t.assignAutoCompleteWidthAndPosition(t.$refs.autoCompleteRef.$refs.input)}))},onBlur:function(){this.autoCompleteResults.length||this.closeOverlay()},closeOverlay:function(e){e&&"search-input"===e.srcElement.id||(this.$emit("blur"),this.autoCompleteResults=[],this.selectedAutoCompleteIndex=null,this.doAutoSearch=!0)},changeAutocompleteWidthOnResize:function(){this.autoCompleteStyle.width=this.$refs.autoCompleteRef.$refs.input.clientWidth+"px"},onInputChange:function(e){this.value=e,e.length>2&&"quizizz-library"===this.selected&&this.getDebouncedResults()},getHighlightedText:function(text){return this.$stringUtils.getHighlightedText(text,this.query)},getAutoCompleteResults:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.getAutoCompleteResults(e.value);case 2:r=t.sent,e.active&&e.doAutoSearch&&(e.autoCompleteResults=r.data.results);case 4:case"end":return t.stop()}}),t)})))()},onClickNavigate:function(e,t){t.stopPropagation();var path=this.$_.escape(e);this.value=e,this.navigate(path),this.autoCompleteResults=[]},navigate:function(e){if(this.$emit("active",!1),this.value.trim().length)return"quizizz-library"===this.selected?(this.$router.push("/admin/search/".concat(e)),this.value=e,void this.closeOverlay()):void("my-library"===this.selected?window.location="/admin/private?term=".concat(e):"reports"===this.selected&&(window.location="/admin/reports?term=".concat(e)))},selectResult:function(e){switch(e.keyCode){case 13:this.selectedAutoCompleteIndex&&(this.value=this.autoCompleteResults[this.selectedAutoCompleteIndex]),this.navigate(this.$_.escape(this.value)),this.$refs.autoCompleteRef.$refs.input.blur();break;case 38:e.preventDefault(),this.doAutoSearch=!1,this.autoCompleteResults.length&&(this.selectedAutoCompleteIndex?(this.selectedAutoCompleteIndex-=1,this.value=this.autoCompleteResults[this.selectedAutoCompleteIndex]):(this.selectedAutoCompleteIndex=this.autoCompleteResults.length-1,this.value=this.autoCompleteResults[this.autoCompleteResults.length-1]));break;case 40:e.preventDefault(),this.doAutoSearch=!1,this.autoCompleteResults.length&&(this.selectedAutoCompleteIndex===this.autoCompleteResults.length-1||null===this.selectedAutoCompleteIndex?(this.selectedAutoCompleteIndex=0,this.value=this.autoCompleteResults[0]):(this.selectedAutoCompleteIndex+=1,this.value=this.autoCompleteResults[this.selectedAutoCompleteIndex]));break;case 9:this.active&&this.closeOverlay();break;default:this.doAutoSearch=!0}}}},f=d,m=r(10),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-full"},["header"===e.variant?r("Input",{ref:"autoCompleteRef",staticClass:"flex-grow",attrs:{inputId:"search-input",value:e.value,inheritBorderRadius:!0,type:"header",placeholder:e.placeholder,licon:"fas fa-search text-purple mt-0.5",liconSize:12,noRing:!0,noBorder:!0,textColorClass:"font-semibold text-xs md:text-sm text-dark-2 placeholder-dark-2 border-none",disabled:e.isSearchBarDisabled,autocomplete:"off"},on:{input:e.onInputChange,focus:e.onFocus,blur:e.onBlur,keydown:e.selectResult}}):r("Input",{ref:"autoCompleteRef",staticClass:"flex-grow",attrs:{inputId:"search-input",value:e.value,inheritBorderRadius:!0,placeholder:e.$i18n("Search for quizzes on any topic"),licon:"fas fa-search text-purple md:mt-0.5 mr-5",liconSize:e.isDesktop?20:12,ticonSize:e.isDesktop?20:12,ticon:"far fa-chevron-right text-dark-4 cursor-pointer",noRing:!0,noBorder:!0,autocomplete:"off",textColorClass:"font-semibold text-xs md:text-2xl text-dark-2 placeholder-dark-5"},on:{input:e.onInputChange,focus:e.onFocus,blur:e.onBlur,keydown:e.selectResult,tIconClicked:function(t){e.navigate(e.$_.escape(e.value))}}}),e._v(" "),e.autoCompleteResults.length?r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeOverlay,expression:"closeOverlay"}],ref:"autocomplete",staticClass:"absolute z-103 rounded-lg bg-light",class:["hero"===e.variant?"shadow-md":""],style:e.autoCompleteStyle},[r("ul",{staticClass:"py-2"},e._l(e.autoCompleteResults,(function(t,o){return r("li",{key:o,staticClass:"pr-4 pl-1 py-1 cursor-pointer text-dark font-bold whitespace-nowrap truncate",class:o===e.selectedAutoCompleteIndex?"bg-lilac-faded":"",on:{mouseover:function(t){e.selectedAutoCompleteIndex=o},mouseleave:function(t){e.selectedAutoCompleteIndex=null},click:function(r){return e.onClickNavigate(t,r)}}},[r("span",{staticClass:"ml-8 truncate",domProps:{innerHTML:e._s(e.getHighlightedText(t))}})])})),0)]):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Input:r(195).default})},1199:function(e,t,r){var content=r(1285);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(41).default)("6b4a3199",content,!1,{sourceMap:!1})},1284:function(e,t,r){"use strict";r(1199)},1285:function(e,t,r){var o=r(40)((function(i){return i[1]}));o.push([e.i,".main-header-search-bar[data-v-279c77e4]{\n  margin-left:0.5rem;\n  display:flex;\n  flex-grow:1;\n  border-radius:0.5rem;\n  border-width:0px;\n  --tw-bg-opacity:1;\n  background-color:rgba(242, 242, 242, var(--tw-bg-opacity))\n}\n@media (min-width: 1025px){\n.main-header-search-bar[data-v-279c77e4]{\n    margin-left:0px;\n    border-width:1px\n}\n}",""]),o.locals={},e.exports=o},1340:function(e,t,r){"use strict";r.r(t);r(26),r(25),r(24),r(17),r(32),r(21),r(33);var o=r(5),n=(r(52),r(42)),l=r(152),c=r(54);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={data:function(){return{filterKeys:l.a.FILTER_KEYS,active:!1,showDropdown:!1,selected:this.isUserCorporate()?"my-library":"quizizz-library",isSearchBarDisabled:!1,list:[{title:this.$i18n("Quizizz library"),value:"quizizz-library"},{title:this.$i18n("My library"),value:"my-library"},{title:this.$i18n("Reports"),value:"reports"}],isSearchFilterApplied:!1}},computed:d(d({},Object(n.c)(["deviceProps","isDesktop"])),{},{isCurrentPageSearchPage:function(){return this.$route.name===this.$constants.PageNames.SEARCH_PAGE},shouldShowDivider:function(){return!!this.isDesktop||this.isCurrentPageSearchPage}}),watch:{$route:function(){this.checkSearchFilterApplied()},showDropdown:function(e){e?this.$emit("dropdown:show"):this.$emit("dropdown:hide")}},created:function(){this.$eventBus.$on("mainHeaderSearchBar:disable",this.handleDisable)},mounted:function(){this.checkSearchFilterApplied()},beforeDestroy:function(){this.$eventBus.$off("mainHeaderSearchBar:disable",this.handleDisable)},methods:{isUserCorporate:function(){return this.$user.isCorporate},checkSearchFilterApplied:function(){var e=this.$route.query,t=Object(c.h)(e);this.isSearchFilterApplied=t.length>0},openFilters:function(){this.$eventBus.$emit("searchFilter:open")},handleDisable:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSearchBarDisabled=e},onFocus:function(){this.active=!0,this.$emit("active",!0)},onBlur:function(){this.active=!1,this.$emit("active",!1)}}},m=f,v=(r(1284),r(10)),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-header-search-bar",class:[e.active?"border-lilac-light":"border-light-1"]},[r("AutoCompleteSearch",{attrs:{selected:e.selected,isSearchBarDisabled:e.isSearchBarDisabled,active:e.active},on:{focus:e.onFocus,blur:e.onBlur}}),e._v(" "),e.shouldShowDivider?r("div",{class:["divider border-r my-2 border-dark-5"]}):e._e(),e._v(" "),!e.isDesktop&&e.isCurrentPageSearchPage?r("Button",{staticClass:"w-40 h-full",attrs:{title:e.$i18n("Filters"),size:"md",type:"custom",licon:e.isSearchFilterApplied?"":"far fa-sliders-h"},on:{click:e.openFilters},scopedSlots:e._u([e.isSearchFilterApplied?{key:"lIcon",fn:function(){return[r("span",{staticClass:"mr-1.5 w-2 h-2 rounded-full bg-green"})]},proxy:!0}:null],null,!0)}):e._e(),e._v(" "),e.isDesktop?r("SelectBox",{staticClass:"w-40",attrs:{size:"md",list:e.list,type:"default",noBorder:!0,divider:!0},on:{open:function(t){e.showDropdown=!0},close:function(t){e.showDropdown=!1}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):e._e()],1)}),[],!1,null,"279c77e4",null);t.default=component.exports;installComponents(component,{AutoCompleteSearch:r(1094).default,Button:r(37).default,SelectBox:r(445).default})},821:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var o=r(75),n=r(6),l=r(15),c=r(16),h=(r(46),r(31),r(45),r(17),r(21),r(196),r(197),r(36),r(0)),d=r.n(h),f=r(13),m=r(76),v=r(7),y=r(244),C=r(123),w=function(){function e(){Object(l.a)(this,e)}var t,r,h;return Object(c.a)(e,null,[{key:"getTeleportQuizzes",value:(h=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var o,n,l,c,h,m,data,y,w,x=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x.length>2&&void 0!==x[2]?x[2]:null,n=12,l=d.a.isNumber(t)?t:0,c=[],d.a.isArray(r.grades)&&!r.grades.includes("all")&&r.grades.forEach((function(e){var t=d.a.find(C.a,{val:parseInt(e,10)});t&&c.push(t.range)})),h={"grade_type.aggs":c,occupation:r.personal?[]:["teacher","teacher_school","teacher_university","other"],cloned:r.cloned?[!0,!1]:[!1],"subjects.aggs":r.subjects&&!r.subjects.includes("All")?r.subjects:[],"lang.aggs":r.langs||[],type:r.type||["quiz"]},r.personal||(h.isProfane=[!0,!1]),m={from:l*n,size:n,sortKey:"_score",personal:!!r.personal,filterList:JSON.stringify(h),rangeList:JSON.stringify({numberOfQuestions:r.numQuestions||[]}),sessionId:r.sessionId,queryId:r.queryId,source:r.source,page:r.page},r.term&&(m.query=r.term.trim()),d.a.isEmpty(r.term)&&r.personal&&(m={from:l*n,size:n,sortKey:"createdAt",filterList:JSON.stringify({createdBy:[r.createdBy]}),forProfile:!0}),e.prev=10,data={params:m},null!==o&&(data.cancelToken=o.token),e.next=15,Object(f.a)().get("/search",data);case 15:if(y=e.sent,!(w=y.data).success){e.next=21;break}return e.abrupt("return",w.data);case 21:return e.abrupt("return",null);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),Object(f.a)().isCancel(e.t0)?v.a.log("Teleport search request cancelled",e.t0):v.a.log("Error at SearchService.getTeleportQuizzes",e.t0);case 27:case"end":return e.stop()}}),e,null,[[10,24]])}))),function(e,t){return h.apply(this,arguments)})},{key:"getAutoCompleteResults",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",e.prev=1,e.next=4,Object(f.a)().post("/getAutoComplete?searchTerm=".concat(t),{searchTerm:t});case 4:if(!(r=e.sent).data.success){e.next=9;break}return e.abrupt("return",r.data);case 9:return e.abrupt("return",null);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),v.a.log("Error at SearchService.getAutoCompleteResults",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),function(){return r.apply(this,arguments)})},{key:"getPublicQuizzes",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){var l,c,h,C,w,x,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l=d.a.isNumber(t)?t:0,c="featured"===n?"featuredPageCache":"searchPageCache",h=m.a.getItem("QuizizzAnalytics")||{},C=y.a.getItem("queryId"),r.occupation&&d.a.isArray(r.occupation)&&!r.occupation.includes("teacher")&&r.occupation.push("teacher"),w={from:12*l,sortKey:r.sortKey||"_score",filterList:JSON.stringify({"grade_type.aggs":r.grade&&"all"!==r.grade?[r.grade]:[],occupation:r.occupation||["teacher","teacher_school","teacher_university","other"],cloned:r.cloned||[!0,!1],"subjects.aggs":r.subject&&!r.subject.includes("All")?[r.subject]:[],"lang.aggs":r.langs||[],isProfane:r.isProfane||[!1],type:r.type||["quiz","presentation"]}),rangeList:JSON.stringify({numberOfQuestions:r.numQuestions||[]}),sessionId:h.sessionId,queryId:C,source:r.source,page:r.page,size:12},x=y.a.getItem(c)||{total:0,hits:[],pageNumber:0,term:r.term},r.term&&(w.query=r.term),!(!x||0<Date.now()||0===x.hits.length||x.pageNumber<l)){e.next=20;break}return e.next=15,Object(f.a)().get("/search",{params:w});case 15:return O=e.sent,x.pageNumber=l,x.total=O.data.data.total,x.hits=[].concat(Object(o.a)(x.hits),Object(o.a)(O.data.data.hits)),e.abrupt("return",O.data.data);case 20:return e.abrupt("return",x);case 23:return e.prev=23,e.t0=e.catch(0),v.a.log("Error at SearchService.getPublicQuizzes",e.t0),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,23]])}))),function(e,r,o){return t.apply(this,arguments)})}]),e}()}}]);